import{S as J,i as O,s as D,w as _,k as S,x as d,m as q,y as h,g as $,q as b,o as w,B as P,d as m,_ as G,v as U,P as V,e as v,c as y,a as C,O as M,b as f,J as k,N as F,T as H}from"../chunks/vendor-6196873f.js";import{P as K,S as L}from"../chunks/Page-107b57e8.js";import{c as z,g as Q,P as R,p as W}from"../chunks/stores-05a3da1c.js";import{M as X}from"../chunks/MediaModal-c297958b.js";import"../chunks/singletons-d1fb5791.js";/* empty css                                                        */import"../chunks/convert-date-825a956c.js";function N(r,e,n){const a=r.slice();return a[13]=e[n],a}function j(r){let e,n,a,o,p,s,t;function u(){return r[10](r[13])}return{c(){e=v("button"),n=v("img"),o=S(),this.h()},l(i){e=y(i,"BUTTON",{title:!0,class:!0});var l=C(e);n=y(l,"IMG",{src:!0,alt:!0,class:!0}),o=q(l),l.forEach(m),this.h()},h(){M(n.src,a="/api"+r[13].attributes.thumbnail.data.attributes.url)||f(n,"src",a),f(n,"alt",""),f(n,"class","svelte-q4wnzr"),f(e,"title",p=r[13].attributes.title),f(e,"class","svelte-q4wnzr")},m(i,l){$(i,e,l),k(e,n),k(e,o),s||(t=F(e,"click",u),s=!0)},p(i,l){r=i,l&2&&!M(n.src,a="/api"+r[13].attributes.thumbnail.data.attributes.url)&&f(n,"src",a),l&2&&p!==(p=r[13].attributes.title)&&f(e,"title",p)},d(i){i&&m(e),s=!1,t()}}}function Y(r){let e,n,a,o;e=new R({props:{pageNum:r[2],lastPage:r[3]}}),e.$on("next",r[8]),e.$on("prev",r[9]);let p=r[1],s=[];for(let t=0;t<p.length;t+=1)s[t]=j(N(r,p,t));return{c(){_(e.$$.fragment),n=S(),a=v("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){d(e.$$.fragment,t),n=q(t),a=y(t,"DIV",{class:!0});var u=C(a);for(let i=0;i<s.length;i+=1)s[i].l(u);u.forEach(m),this.h()},h(){f(a,"class","gallery svelte-q4wnzr")},m(t,u){h(e,t,u),$(t,n,u),$(t,a,u);for(let i=0;i<s.length;i+=1)s[i].m(a,null);o=!0},p(t,u){const i={};if(u&4&&(i.pageNum=t[2]),e.$set(i),u&34){p=t[1];let l;for(l=0;l<p.length;l+=1){const g=N(t,p,l);s[l]?s[l].p(g,u):(s[l]=j(g),s[l].c(),s[l].m(a,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=p.length}},i(t){o||(b(e.$$.fragment,t),o=!0)},o(t){w(e.$$.fragment,t),o=!1},d(t){P(e,t),t&&m(n),t&&m(a),H(s,t)}}}function Z(r){let e,n;return e=new L({props:{simple:"true",$$slots:{default:[Y]},$$scope:{ctx:r}}}),{c(){_(e.$$.fragment)},l(a){d(e.$$.fragment,a)},m(a,o){h(e,a,o),n=!0},p(a,o){const p={};o&65542&&(p.$$scope={dirty:o,ctx:a}),e.$set(p)},i(a){n||(b(e.$$.fragment,a),n=!0)},o(a){w(e.$$.fragment,a),n=!1},d(a){P(e,a)}}}function x(r){let e,n,a,o,p={};return e=new X({props:p}),r[7](e),a=new K({props:{title:"Art",$$slots:{default:[Z]},$$scope:{ctx:r}}}),{c(){_(e.$$.fragment),n=S(),_(a.$$.fragment)},l(s){d(e.$$.fragment,s),n=q(s),d(a.$$.fragment,s)},m(s,t){h(e,s,t),$(s,n,t),h(a,s,t),o=!0},p(s,[t]){const u={};e.$set(u);const i={};t&65542&&(i.$$scope={dirty:t,ctx:s}),a.$set(i)},i(s){o||(b(e.$$.fragment,s),b(a.$$.fragment,s),o=!0)},o(s){w(e.$$.fragment,s),w(a.$$.fragment,s),o=!1},d(s){r[7](null),P(e,s),s&&m(n),P(a,s)}}}let ee=15;async function ue({fetch:r}){let e=["filters[media_type][$eq]=art",`pagination[pageSize]=${ee}`];return{props:{pagination:(await(await r(`/api/posts?${e.join("&")}`)).json()).meta.pagination}}}function te(r,e,n){let a;G(r,W,c=>n(11,a=c));let{pagination:o}=e,p,s=[],t=1,u=o.pageCount;U(async()=>{await i()});async function i(){a.url.searchParams.has("page")?n(2,t=z(a.url.searchParams.get("page"),1,u)):n(2,t=1);let c=["filters[media_type][$eq]=art","sort=date:desc",`pagination[page]=${t}`,`pagination[pageSize]=${o.pageSize}`,"pagination[withCount]=false","populate[0]=thumbnail","populate[1]=media_file"],I=await(await fetch(`/api/posts?${c.join("&")}`)).json();n(1,s=I.data)}function l(c){n(2,t=z(t+c,1,u)),a.url.searchParams.set("page",t),Q(a.url.toString()),i()}function g(c){p.openModal(c)}function B(c){V[c?"unshift":"push"](()=>{p=c,n(0,p)})}const T=()=>l(1),A=()=>l(-1),E=c=>g(c);return r.$$set=c=>{"pagination"in c&&n(6,o=c.pagination)},[p,s,t,u,l,g,o,B,T,A,E]}class ce extends J{constructor(e){super();O(this,e,te,x,D,{pagination:6})}}export{ce as default,ue as load};
