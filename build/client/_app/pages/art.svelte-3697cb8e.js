import{S as J,i as O,s as D,w as _,k as S,x as h,m as q,y as d,g as $,q as b,o as w,B as P,d as m,_ as G,v as U,P as V,e as v,c as y,a as C,O as M,b as f,J as k,N as F,T as H}from"../chunks/vendor-6196873f.js";import{P as K,S as L}from"../chunks/Page-1ac0e347.js";import{c as z,g as Q,P as R,p as W}from"../chunks/stores-1a33e186.js";import{M as X}from"../chunks/MediaModal-dc3e14d4.js";import"../chunks/singletons-d1fb5791.js";/* empty css                                                        */import"../chunks/convert-date-825a956c.js";function N(r,t,n){const a=r.slice();return a[13]=t[n],a}function j(r){let t,n,a,o,p,s,e;function c(){return r[10](r[13])}return{c(){t=v("button"),n=v("img"),o=S(),this.h()},l(i){t=y(i,"BUTTON",{title:!0,class:!0});var l=C(t);n=y(l,"IMG",{src:!0,alt:!0,class:!0}),o=q(l),l.forEach(m),this.h()},h(){M(n.src,a="https://api.graciebell.art"+r[13].attributes.thumbnail.data.attributes.formats.thumbnail.url)||f(n,"src",a),f(n,"alt",""),f(n,"class","svelte-q4wnzr"),f(t,"title",p=r[13].attributes.title),f(t,"class","svelte-q4wnzr")},m(i,l){$(i,t,l),k(t,n),k(t,o),s||(e=F(t,"click",c),s=!0)},p(i,l){r=i,l&2&&!M(n.src,a="https://api.graciebell.art"+r[13].attributes.thumbnail.data.attributes.formats.thumbnail.url)&&f(n,"src",a),l&2&&p!==(p=r[13].attributes.title)&&f(t,"title",p)},d(i){i&&m(t),s=!1,e()}}}function Y(r){let t,n,a,o;t=new R({props:{pageNum:r[2],lastPage:r[3]}}),t.$on("next",r[8]),t.$on("prev",r[9]);let p=r[1],s=[];for(let e=0;e<p.length;e+=1)s[e]=j(N(r,p,e));return{c(){_(t.$$.fragment),n=S(),a=v("div");for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){h(t.$$.fragment,e),n=q(e),a=y(e,"DIV",{class:!0});var c=C(a);for(let i=0;i<s.length;i+=1)s[i].l(c);c.forEach(m),this.h()},h(){f(a,"class","gallery svelte-q4wnzr")},m(e,c){d(t,e,c),$(e,n,c),$(e,a,c);for(let i=0;i<s.length;i+=1)s[i].m(a,null);o=!0},p(e,c){const i={};if(c&4&&(i.pageNum=e[2]),t.$set(i),c&34){p=e[1];let l;for(l=0;l<p.length;l+=1){const g=N(e,p,l);s[l]?s[l].p(g,c):(s[l]=j(g),s[l].c(),s[l].m(a,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=p.length}},i(e){o||(b(t.$$.fragment,e),o=!0)},o(e){w(t.$$.fragment,e),o=!1},d(e){P(t,e),e&&m(n),e&&m(a),H(s,e)}}}function Z(r){let t,n;return t=new L({props:{simple:"true",$$slots:{default:[Y]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment)},l(a){h(t.$$.fragment,a)},m(a,o){d(t,a,o),n=!0},p(a,o){const p={};o&65542&&(p.$$scope={dirty:o,ctx:a}),t.$set(p)},i(a){n||(b(t.$$.fragment,a),n=!0)},o(a){w(t.$$.fragment,a),n=!1},d(a){P(t,a)}}}function x(r){let t,n,a,o,p={};return t=new X({props:p}),r[7](t),a=new K({props:{title:"Art",$$slots:{default:[Z]},$$scope:{ctx:r}}}),{c(){_(t.$$.fragment),n=S(),_(a.$$.fragment)},l(s){h(t.$$.fragment,s),n=q(s),h(a.$$.fragment,s)},m(s,e){d(t,s,e),$(s,n,e),d(a,s,e),o=!0},p(s,[e]){const c={};t.$set(c);const i={};e&65542&&(i.$$scope={dirty:e,ctx:s}),a.$set(i)},i(s){o||(b(t.$$.fragment,s),b(a.$$.fragment,s),o=!0)},o(s){w(t.$$.fragment,s),w(a.$$.fragment,s),o=!1},d(s){r[7](null),P(t,s),s&&m(n),P(a,s)}}}let tt=15;async function ct({fetch:r}){let t=["filters[media_type][$eq]=art",`pagination[pageSize]=${tt}`];return{props:{pagination:(await(await r(`https://api.graciebell.art/api/posts?${t.join("&")}`)).json()).meta.pagination}}}function et(r,t,n){let a;G(r,W,u=>n(11,a=u));let{pagination:o}=t,p,s=[],e=1,c=o.pageCount;U(async()=>{await i()});async function i(){a.url.searchParams.has("page")?n(2,e=z(a.url.searchParams.get("page"),1,c)):n(2,e=1);let u=["filters[media_type][$eq]=art","sort=date:desc",`pagination[page]=${e}`,`pagination[pageSize]=${o.pageSize}`,"pagination[withCount]=false","populate[0]=thumbnail","populate[1]=media_file"],I=await(await fetch(`https://api.graciebell.art/api/posts?${u.join("&")}`)).json();n(1,s=I.data)}function l(u){n(2,e=z(e+u,1,c)),a.url.searchParams.set("page",e),Q(a.url.toString()),i()}function g(u){p.openModal(u)}function B(u){V[u?"unshift":"push"](()=>{p=u,n(0,p)})}const T=()=>l(1),A=()=>l(-1),E=u=>g(u);return r.$$set=u=>{"pagination"in u&&n(6,o=u.pagination)},[p,s,e,c,l,g,o,B,T,A,E]}class ut extends J{constructor(t){super();O(this,t,et,x,D,{pagination:6})}}export{ut as default,ct as load};
