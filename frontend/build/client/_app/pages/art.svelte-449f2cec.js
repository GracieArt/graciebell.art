import{S as U,i as V,s as J,e as C,x as $,k as y,c as I,a as T,y as b,m as N,d as g,b as w,g as h,z as v,J as j,r as _,p as d,C as k,K as Q,t as M,h as z,j as E,L as R,w as W,M as X,N as Y,o as Z,q as x,O as ee}from"../chunks/index-467184d8.js";import{I as q,P as te,S as ae}from"../chunks/Page-43e49a77.js";import{c as P}from"../chunks/singletons-d1fb5791.js";import{p as ne}from"../chunks/stores-ad8a1bc6.js";import{I as se}from"../chunks/Image-2e50915c.js";import{M as re}from"../chunks/MediaModal-780f8e3a.js";import"../chunks/SpacedDiv-9b4a7d42.js";import"../chunks/convert-date-64d95c73.js";import"../chunks/index-7e5993c4.js";P.disable_scroll_handling;const le=P.goto;P.invalidate;P.prefetch;P.prefetch_routes;P.before_navigate;P.after_navigate;function oe(l){let e;return{c(){e=M(l[2])},l(n){e=z(n,l[2])},m(n,a){h(n,e,a)},p(n,a){a&4&&E(e,n[2])},d(n){n&&g(e)}}}function ie(l){let e,n,a;return{c(){e=M(l[0]),n=M(" of "),a=M(l[1])},l(s){e=z(s,l[0]),n=z(s," of "),a=z(s,l[1])},m(s,i){h(s,e,i),h(s,n,i),h(s,a,i)},p(s,i){i&1&&E(e,s[0]),i&2&&E(a,s[1])},d(s){s&&g(e),s&&g(n),s&&g(a)}}}function ce(l){let e,n,a,s,i,t,f;n=new q({props:{type:"left-arrow",size:"big",color:B}}),n.$on("click",l[4]);function o(c,p){return c[2]==""?ie:oe}let r=o(l),u=r(l);return t=new q({props:{type:"right-arrow",size:"big",color:B}}),t.$on("click",l[5]),{c(){e=C("div"),$(n.$$.fragment),a=y(),s=C("span"),u.c(),i=y(),$(t.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var p=T(e);b(n.$$.fragment,p),a=N(p),s=I(p,"SPAN",{class:!0});var S=T(s);u.l(S),S.forEach(g),i=N(p),b(t.$$.fragment,p),p.forEach(g),this.h()},h(){w(s,"class","page-number svelte-1x15rsl"),w(e,"class","page-controls svelte-1x15rsl")},m(c,p){h(c,e,p),v(n,e,null),j(e,a),j(e,s),u.m(s,null),j(e,i),v(t,e,null),f=!0},p(c,[p]){r===(r=o(c))&&u?u.p(c,p):(u.d(1),u=r(c),u&&(u.c(),u.m(s,null)))},i(c){f||(_(n.$$.fragment,c),_(t.$$.fragment,c),f=!0)},o(c){d(n.$$.fragment,c),d(t.$$.fragment,c),f=!1},d(c){c&&g(e),k(n),u.d(),k(t)}}}let B="var(--dark-blue)";function ue(l,e,n){let{pageNum:a}=e,{lastPage:s}=e,{customText:i=""}=e,t=Q();const f=()=>t("prev"),o=()=>t("next");return l.$$set=r=>{"pageNum"in r&&n(0,a=r.pageNum),"lastPage"in r&&n(1,s=r.lastPage),"customText"in r&&n(2,i=r.customText)},[a,s,i,t,f,o]}class fe extends U{constructor(e){super(),V(this,e,ue,ce,J,{pageNum:0,lastPage:1,customText:2})}}function A(l,e,n){return Math.min(Math.max(l,e),n)}function D(l,e,n){const a=l.slice();a[12]=e[n];const s=a[12].attributes.thumbnail.data.attributes;a[13]=s;const i=K+a[13].formats.thumbnail.url;return a[14]=i,a}function O(l){let e,n,a,s,i,t,f;n=new se({props:{src:l[14],style:"border-radius: var(--rounded-2); width: 100%;",alt:""}});function o(){return l[9](l[12])}return{c(){e=C("button"),$(n.$$.fragment),a=y(),this.h()},l(r){e=I(r,"BUTTON",{title:!0,class:!0});var u=T(e);b(n.$$.fragment,u),a=N(u),u.forEach(g),this.h()},h(){w(e,"title",s=l[12].attributes.title),w(e,"class","svelte-ujxgij")},m(r,u){h(r,e,u),v(n,e,null),j(e,a),i=!0,t||(f=Y(e,"click",o),t=!0)},p(r,u){l=r;const c={};u&4&&(c.src=l[14]),n.$set(c),(!i||u&4&&s!==(s=l[12].attributes.title))&&w(e,"title",s)},i(r){i||(_(n.$$.fragment,r),i=!0)},o(r){d(n.$$.fragment,r),i=!1},d(r){r&&g(e),k(n),t=!1,f()}}}function pe(l){let e,n,a,s;e=new fe({props:{pageNum:l[1],lastPage:l[3]}}),e.$on("next",l[7]),e.$on("prev",l[8]);let i=l[2],t=[];for(let o=0;o<i.length;o+=1)t[o]=O(D(l,i,o));const f=o=>d(t[o],1,1,()=>{t[o]=null});return{c(){$(e.$$.fragment),n=y(),a=C("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){b(e.$$.fragment,o),n=N(o),a=I(o,"DIV",{class:!0});var r=T(a);for(let u=0;u<t.length;u+=1)t[u].l(r);r.forEach(g),this.h()},h(){w(a,"class","gallery svelte-ujxgij")},m(o,r){v(e,o,r),h(o,n,r),h(o,a,r);for(let u=0;u<t.length;u+=1)t[u].m(a,null);s=!0},p(o,r){const u={};if(r&2&&(u.pageNum=o[1]),e.$set(u),r&5){i=o[2];let c;for(c=0;c<i.length;c+=1){const p=D(o,i,c);t[c]?(t[c].p(p,r),_(t[c],1)):(t[c]=O(p),t[c].c(),_(t[c],1),t[c].m(a,null))}for(Z(),c=i.length;c<t.length;c+=1)f(c);x()}},i(o){if(!s){_(e.$$.fragment,o);for(let r=0;r<i.length;r+=1)_(t[r]);s=!0}},o(o){d(e.$$.fragment,o),t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)d(t[r]);s=!1},d(o){k(e,o),o&&g(n),o&&g(a),ee(t,o)}}}function me(l){let e,n;return e=new ae({props:{simple:"true",$$slots:{default:[pe]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment)},l(a){b(e.$$.fragment,a)},m(a,s){v(e,a,s),n=!0},p(a,s){const i={};s&131079&&(i.$$scope={dirty:s,ctx:a}),e.$set(i)},i(a){n||(_(e.$$.fragment,a),n=!0)},o(a){d(e.$$.fragment,a),n=!1},d(a){k(e,a)}}}function ge(l){let e,n,a,s,i={};return e=new re({props:i}),l[6](e),a=new te({props:{title:"Art",$$slots:{default:[me]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment),n=y(),$(a.$$.fragment)},l(t){b(e.$$.fragment,t),n=N(t),b(a.$$.fragment,t)},m(t,f){v(e,t,f),h(t,n,f),v(a,t,f),s=!0},p(t,[f]){const o={};e.$set(o);const r={};f&131079&&(r.$$scope={dirty:f,ctx:t}),a.$set(r)},i(t){s||(_(e.$$.fragment,t),_(a.$$.fragment,t),s=!0)},o(t){d(e.$$.fragment,t),d(a.$$.fragment,t),s=!1},d(t){l[6](null),k(e,t),t&&g(n),k(a,t)}}}let _e=15;async function Se({fetch:l}){let e=["filters[media_type][$eq]=art",`pagination[pageSize]=${_e}`];return{props:{pagination:(await(await l(`https://api.graciebell.art/api/posts?${e.join("&")}`)).json()).meta.pagination}}}let K="https://api.graciebell.art";function he(l,e,n){let a;R(l,ne,m=>n(10,a=m));let{pagination:s}=e,i,t=1,f=s.pageCount,o=[];async function r(){a.url.searchParams.has("page")?n(1,t=A(a.url.searchParams.get("page"),1,f)):n(1,t=1);let m=`${K}/api/posts`,F=["filters[media_type][$eq]=art","sort=date:desc",`pagination[page]=${t}`,`pagination[pageSize]=${s.pageSize}`,"pagination[withCount]=false","populate[0]=thumbnail","populate[1]=media_file"],G=await fetch(`${m}?${F.join("&")}`).then(H=>H.json());n(2,o=G.data)}function u(m){n(1,t=A(t+m,1,f)),a.url.searchParams.set("page",t),le(a.url.toString()),r()}W(r);function c(m){X[m?"unshift":"push"](()=>{i=m,n(0,i)})}const p=()=>u(1),S=()=>u(-1),L=m=>i.openModal(m);return l.$$set=m=>{"pagination"in m&&n(5,s=m.pagination)},[i,t,o,f,u,s,c,p,S,L]}class je extends U{constructor(e){super(),V(this,e,he,ge,J,{pagination:5})}}export{je as default,Se as load};
