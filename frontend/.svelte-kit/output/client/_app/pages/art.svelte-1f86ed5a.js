import{S as A,i as E,s as J,w as h,k as y,x as $,m as S,y as d,g as v,q as m,o as g,B as b,d as _,$ as D,v as O,P as U,e as N,c as j,a as q,b as P,J as V,N as F,n as G,p as H,T as K}from"../chunks/vendor-e918deec.js";import{P as L,S as Q}from"../chunks/Page-3700f7bd.js";import{c as k,g as R,P as W,p as X}from"../chunks/stores-9fb9f4d7.js";import{M as Y,I as Z}from"../chunks/MediaModal-567284da.js";import"../chunks/singletons-d1fb5791.js";/* empty css                                                        */import"../chunks/convert-date-64d95c73.js";function M(l,e,r){const a=l.slice();return a[13]=e[r],a}function z(l){let e,r,a,o,i,t,c;r=new Z({props:{src:"https://api.graciebell.art"+l[13].attributes.thumbnail.data.attributes.formats.thumbnail.url,alt:""}});function n(){return l[10](l[13])}return{c(){e=N("button"),h(r.$$.fragment),a=y(),this.h()},l(s){e=j(s,"BUTTON",{title:!0,class:!0});var p=q(e);$(r.$$.fragment,p),a=S(p),p.forEach(_),this.h()},h(){P(e,"title",o=l[13].attributes.title),P(e,"class","rounded-more svelte-1r35nzb")},m(s,p){v(s,e,p),d(r,e,null),V(e,a),i=!0,t||(c=F(e,"click",n),t=!0)},p(s,p){l=s;const u={};p&2&&(u.src="https://api.graciebell.art"+l[13].attributes.thumbnail.data.attributes.formats.thumbnail.url),r.$set(u),(!i||p&2&&o!==(o=l[13].attributes.title))&&P(e,"title",o)},i(s){i||(m(r.$$.fragment,s),i=!0)},o(s){g(r.$$.fragment,s),i=!1},d(s){s&&_(e),b(r),t=!1,c()}}}function x(l){let e,r,a,o;e=new W({props:{pageNum:l[2],lastPage:l[3]}}),e.$on("next",l[8]),e.$on("prev",l[9]);let i=l[1],t=[];for(let n=0;n<i.length;n+=1)t[n]=z(M(l,i,n));const c=n=>g(t[n],1,1,()=>{t[n]=null});return{c(){h(e.$$.fragment),r=y(),a=N("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){$(e.$$.fragment,n),r=S(n),a=j(n,"DIV",{class:!0});var s=q(a);for(let p=0;p<t.length;p+=1)t[p].l(s);s.forEach(_),this.h()},h(){P(a,"class","gallery svelte-1r35nzb")},m(n,s){d(e,n,s),v(n,r,s),v(n,a,s);for(let p=0;p<t.length;p+=1)t[p].m(a,null);o=!0},p(n,s){const p={};if(s&4&&(p.pageNum=n[2]),e.$set(p),s&34){i=n[1];let u;for(u=0;u<i.length;u+=1){const w=M(n,i,u);t[u]?(t[u].p(w,s),m(t[u],1)):(t[u]=z(w),t[u].c(),m(t[u],1),t[u].m(a,null))}for(G(),u=i.length;u<t.length;u+=1)c(u);H()}},i(n){if(!o){m(e.$$.fragment,n);for(let s=0;s<i.length;s+=1)m(t[s]);o=!0}},o(n){g(e.$$.fragment,n),t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)g(t[s]);o=!1},d(n){b(e,n),n&&_(r),n&&_(a),K(t,n)}}}function tt(l){let e,r;return e=new Q({props:{simple:"true",$$slots:{default:[x]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},l(a){$(e.$$.fragment,a)},m(a,o){d(e,a,o),r=!0},p(a,o){const i={};o&65542&&(i.$$scope={dirty:o,ctx:a}),e.$set(i)},i(a){r||(m(e.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),r=!1},d(a){b(e,a)}}}function et(l){let e,r,a,o,i={};return e=new Y({props:i}),l[7](e),a=new L({props:{title:"Art",$$slots:{default:[tt]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),r=y(),h(a.$$.fragment)},l(t){$(e.$$.fragment,t),r=S(t),$(a.$$.fragment,t)},m(t,c){d(e,t,c),v(t,r,c),d(a,t,c),o=!0},p(t,[c]){const n={};e.$set(n);const s={};c&65542&&(s.$$scope={dirty:c,ctx:t}),a.$set(s)},i(t){o||(m(e.$$.fragment,t),m(a.$$.fragment,t),o=!0)},o(t){g(e.$$.fragment,t),g(a.$$.fragment,t),o=!1},d(t){l[7](null),b(e,t),t&&_(r),b(a,t)}}}let at=15;async function ft({fetch:l}){let e=["filters[media_type][$eq]=art",`pagination[pageSize]=${at}`];return{props:{pagination:(await(await l(`https://api.graciebell.art/api/posts?${e.join("&")}`)).json()).meta.pagination}}}function nt(l,e,r){let a;D(l,X,f=>r(11,a=f));let{pagination:o}=e,i,t=[],c=1,n=o.pageCount;O(async()=>{await s()});async function s(){a.url.searchParams.has("page")?r(2,c=k(a.url.searchParams.get("page"),1,n)):r(2,c=1);let f=["filters[media_type][$eq]=art","sort=date:desc",`pagination[page]=${c}`,`pagination[pageSize]=${o.pageSize}`,"pagination[withCount]=false","populate[0]=thumbnail","populate[1]=media_file"],T=await(await fetch(`https://api.graciebell.art/api/posts?${f.join("&")}`)).json();r(1,t=T.data)}function p(f){r(2,c=k(c+f,1,n)),a.url.searchParams.set("page",c),R(a.url.toString()),s()}function u(f){i.openModal(f)}function w(f){U[f?"unshift":"push"](()=>{i=f,r(0,i)})}const B=()=>p(1),C=()=>p(-1),I=f=>u(f);return l.$$set=f=>{"pagination"in f&&r(6,o=f.pagination)},[i,t,c,n,p,u,o,w,B,C,I]}class mt extends A{constructor(e){super();E(this,e,nt,et,J,{pagination:6})}}export{mt as default,ft as load};
