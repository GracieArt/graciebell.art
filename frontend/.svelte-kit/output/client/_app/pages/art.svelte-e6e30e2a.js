import{K as Q,S as U,i as V,s as J,e as M,x as $,k as S,t as I,c as z,a as C,y as b,m as N,h as E,d as _,b as y,g as j,z as v,J as d,j as q,r as m,p as h,C as P,L as R,M as W,w as X,N as Y,O as Z,o as x,q as ee,P as te}from"../chunks/index-7d638eff.js";import{I as B,P as ae,S as se}from"../chunks/Page-6743df64.js";import{c as w}from"../chunks/singletons-d1fb5791.js";import{I as ne}from"../chunks/index-79bcb738.js";import{M as re}from"../chunks/MediaModal-992dd915.js";import"../chunks/SpacedDiv-52b6325e.js";w.disable_scroll_handling;const le=w.goto;w.invalidate;w.prefetch;w.prefetch_routes;w.before_navigate;w.after_navigate;const oe=()=>{const s=Q("__svelte__");return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:s.navigating.subscribe}},session:s.session,updated:s.updated}},ie={subscribe(s){return oe().page.subscribe(s)}};function ce(s){let e,n,a,o,c,t,g,r,l,u;return n=new B({props:{type:"left-arrow",size:"big",color:A}}),n.$on("click",s[3]),l=new B({props:{type:"right-arrow",size:"big",color:A}}),l.$on("click",s[4]),{c(){e=M("div"),$(n.$$.fragment),a=S(),o=M("span"),c=I(s[0]),t=I(" of "),g=I(s[1]),r=S(),$(l.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var p=C(e);b(n.$$.fragment,p),a=N(p),o=z(p,"SPAN",{class:!0});var k=C(o);c=E(k,s[0]),t=E(k," of "),g=E(k,s[1]),k.forEach(_),r=N(p),b(l.$$.fragment,p),p.forEach(_),this.h()},h(){y(o,"class","page-number svelte-1x15rsl"),y(e,"class","page-controls svelte-1x15rsl")},m(i,p){j(i,e,p),v(n,e,null),d(e,a),d(e,o),d(o,c),d(o,t),d(o,g),d(e,r),v(l,e,null),u=!0},p(i,[p]){(!u||p&1)&&q(c,i[0]),(!u||p&2)&&q(g,i[1])},i(i){u||(m(n.$$.fragment,i),m(l.$$.fragment,i),u=!0)},o(i){h(n.$$.fragment,i),h(l.$$.fragment,i),u=!1},d(i){i&&_(e),P(n),P(l)}}}let A="var(--dark-blue)";function ue(s,e,n){let{pageNum:a}=e,{lastPage:o}=e,c=R();const t=()=>c("prev"),g=()=>c("next");return s.$$set=r=>{"pageNum"in r&&n(0,a=r.pageNum),"lastPage"in r&&n(1,o=r.lastPage)},[a,o,c,t,g]}class ge extends U{constructor(e){super(),V(this,e,ue,ce,J,{pageNum:0,lastPage:1})}}function D(s,e,n){return Math.min(Math.max(s,e),n)}function O(s,e,n){const a=s.slice();a[12]=e[n];const o=a[12].attributes.thumbnail.data.attributes;a[13]=o;const c=K+a[13].formats.thumbnail.url;return a[14]=c,a}function T(s){let e,n,a,o,c,t,g;n=new ne({props:{src:s[14],style:"border-radius: var(--rounded-2); width: 100%;",alt:""}});function r(){return s[9](s[12])}return{c(){e=M("button"),$(n.$$.fragment),a=S(),this.h()},l(l){e=z(l,"BUTTON",{title:!0,class:!0});var u=C(e);b(n.$$.fragment,u),a=N(u),u.forEach(_),this.h()},h(){y(e,"title",o=s[12].attributes.title),y(e,"class","svelte-ujxgij")},m(l,u){j(l,e,u),v(n,e,null),d(e,a),c=!0,t||(g=Z(e,"click",r),t=!0)},p(l,u){s=l;const i={};u&4&&(i.src=s[14]),n.$set(i),(!c||u&4&&o!==(o=s[12].attributes.title))&&y(e,"title",o)},i(l){c||(m(n.$$.fragment,l),c=!0)},o(l){h(n.$$.fragment,l),c=!1},d(l){l&&_(e),P(n),t=!1,g()}}}function pe(s){let e,n,a,o;e=new ge({props:{pageNum:s[1],lastPage:s[3]}}),e.$on("next",s[7]),e.$on("prev",s[8]);let c=s[2],t=[];for(let r=0;r<c.length;r+=1)t[r]=T(O(s,c,r));const g=r=>h(t[r],1,1,()=>{t[r]=null});return{c(){$(e.$$.fragment),n=S(),a=M("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){b(e.$$.fragment,r),n=N(r),a=z(r,"DIV",{class:!0});var l=C(a);for(let u=0;u<t.length;u+=1)t[u].l(l);l.forEach(_),this.h()},h(){y(a,"class","gallery svelte-ujxgij")},m(r,l){v(e,r,l),j(r,n,l),j(r,a,l);for(let u=0;u<t.length;u+=1)t[u].m(a,null);o=!0},p(r,l){const u={};if(l&2&&(u.pageNum=r[1]),e.$set(u),l&5){c=r[2];let i;for(i=0;i<c.length;i+=1){const p=O(r,c,i);t[i]?(t[i].p(p,l),m(t[i],1)):(t[i]=T(p),t[i].c(),m(t[i],1),t[i].m(a,null))}for(x(),i=c.length;i<t.length;i+=1)g(i);ee()}},i(r){if(!o){m(e.$$.fragment,r);for(let l=0;l<c.length;l+=1)m(t[l]);o=!0}},o(r){h(e.$$.fragment,r),t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)h(t[l]);o=!1},d(r){P(e,r),r&&_(n),r&&_(a),te(t,r)}}}function fe(s){let e,n;return e=new se({props:{simple:"true",$$slots:{default:[pe]},$$scope:{ctx:s}}}),{c(){$(e.$$.fragment)},l(a){b(e.$$.fragment,a)},m(a,o){v(e,a,o),n=!0},p(a,o){const c={};o&131079&&(c.$$scope={dirty:o,ctx:a}),e.$set(c)},i(a){n||(m(e.$$.fragment,a),n=!0)},o(a){h(e.$$.fragment,a),n=!1},d(a){P(e,a)}}}function me(s){let e,n,a,o,c={};return e=new re({props:c}),s[6](e),a=new ae({props:{title:"Art",$$slots:{default:[fe]},$$scope:{ctx:s}}}),{c(){$(e.$$.fragment),n=S(),$(a.$$.fragment)},l(t){b(e.$$.fragment,t),n=N(t),b(a.$$.fragment,t)},m(t,g){v(e,t,g),j(t,n,g),v(a,t,g),o=!0},p(t,[g]){const r={};e.$set(r);const l={};g&131079&&(l.$$scope={dirty:g,ctx:t}),a.$set(l)},i(t){o||(m(e.$$.fragment,t),m(a.$$.fragment,t),o=!0)},o(t){h(e.$$.fragment,t),h(a.$$.fragment,t),o=!1},d(t){s[6](null),P(e,t),t&&_(n),P(a,t)}}}let _e=15;async function ke({fetch:s}){let e=["filters[media_type][$eq]=art",`pagination[pageSize]=${_e}`];return{props:{pagination:(await(await s(`https://api.graciebell.art/api/posts?${e.join("&")}`)).json()).meta.pagination}}}let K="https://api.graciebell.art";function he(s,e,n){let a;W(s,ie,f=>n(10,a=f));let{pagination:o}=e,c,t=1,g=o.pageCount,r=[];async function l(){a.url.searchParams.has("page")?n(1,t=D(a.url.searchParams.get("page"),1,g)):n(1,t=1);let f=`${K}/api/posts`,F=["filters[media_type][$eq]=art","sort=date:desc",`pagination[page]=${t}`,`pagination[pageSize]=${o.pageSize}`,"pagination[withCount]=false","populate[0]=thumbnail","populate[1]=media_file"],G=await fetch(`${f}?${F.join("&")}`).then(H=>H.json());n(2,r=G.data)}function u(f){n(1,t=D(t+f,1,g)),a.url.searchParams.set("page",t),le(a.url.toString()),l()}X(l);function i(f){Y[f?"unshift":"push"](()=>{c=f,n(0,c)})}const p=()=>u(1),k=()=>u(-1),L=f=>c.openModal(f);return s.$$set=f=>{"pagination"in f&&n(5,o=f.pagination)},[c,t,r,g,u,o,i,p,k,L]}class ye extends U{constructor(e){super(),V(this,e,he,me,J,{pagination:5})}}export{ye as default,ke as load};
